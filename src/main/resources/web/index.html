<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2f855a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="author" content="MagnoCat Tecnologia https://magno.cat">

    <!-- Chart.js e seu adaptador de data (ESSENCIAL para o gr√°fico funcionar) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <title>MC Trilhas - Servidor Minecraft Escoteiro</title>

    <link rel="manifest" href="/manifest.json">

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="icon" type="image/png" sizes="70x70" href="/android-icon-70x70.png">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@600&display=swap"
        rel="stylesheet">
    <!-- Font Awesome JS -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"></script>
    <style>
        :root {
            --scout-green: #2f855a;
            --scout-brown: #744210;
            --scout-light: #f7fafc;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-image: url('/bg.jpg');
            background-color: #f7fafc;
            color: #333;
            margin: 0;
        }

        .header {
            background-color: var(--scout-green);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .section-title {
            font-family: 'Montserrat', sans-serif;
            color: var(--scout-green);
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .card {
            background-color: white;
            border-radius: 5px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #ddd;
        }

        .link-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-left: 4px solid var(--scout-brown);
            background-color: var(--scout-light);
            border-radius: 5px;
            margin-bottom: 1rem;
        }

        .footer {
            background-color: #1a202c;
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }

        @media (max-width: 640px) {
            .header {
                padding: 1.5rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .card {
                padding: 1rem;
            }

            .link-item {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>

<body>
    <!-- Cabe√ßalho -->
    <header class="header">
        <h1 class="text-4xl font-bold">MC Trilhas - Servidor Minecraft Escoteiro</h1>
        <p class="mt-2 text-lg">Uma aventura digital inspirada nos valores escoteiros!<br>(EM DESENVOLVIMENTO)</p>
        <button id="install-pwa-btn"
            class="hidden mt-4 bg-white text-green-700 font-bold py-2 px-4 rounded-lg shadow-md hover:bg-gray-200 transition-colors">
            <i class="fas fa-download mr-2"></i> Instalar App
        </button>
    </header>

    <!-- Conte√∫do Principal -->
    <main class="max-w-5xl mx-auto p-6">
        <!-- Sobre o Servidor -->
        <section class="card">
            <h2 class="section-title">Sobre o MC Trilhas</h2>
            <p class="text-lg">
                Bem-vindo ao <strong>MC Trilhas</strong>, um servidor Minecraft criado com base nos princ√≠pios
                escoteiros de amizade, respeito e aventura! Nosso servidor oferece uma experi√™ncia √∫nica para jogadores
                de Minecraft Java e Bedrock, com mapas interativos, pain√©is de administra√ß√£o e uma comunidade vibrante
                no Discord. Inspirado pelo <a href="https://g.co/kgs/idwXxCh" target="_blank"
                    class="text-blue-600 hover:underline">Grupo Escoteiro do Ar Cidade das Flores</a>, o MC Trilhas √© um
                espa√ßo para divers√£o e aprendizado.
            </p>
        </section>

        <!-- Regras Escoteiras -->
        <section class="card">
            <h2 class="section-title">Regras Escoteiras do MC Trilhas</h2>
            <ul class="list-disc list-inside space-y-2 text-lg">
                <li><strong>Honra:</strong> Seja honesto e respeite as regras do servidor.</li>
                <li><strong>Lealdade:</strong> Apoie seus colegas jogadores e a comunidade.</li>
                <li><strong>Respeito:</strong> Trate todos com cortesia, sem ofensas ou comportamentos t√≥xicos.</li>
                <li><strong>Coopera√ß√£o:</strong> Trabalhe em equipe para construir e explorar.</li>
                <li><strong>Responsabilidade:</strong> Cuide do ambiente do servidor e reporte problemas.</li>
                <li><strong>Amizade:</strong> Fa√ßa novos amigos e divirta-se com respeito m√∫tuo.</li>
                <li><strong>Coragem:</strong> Enfrente desafios e ajude outros a super√°-los.</li>
                <li><strong>Preserva√ß√£o:</strong> Respeite as constru√ß√µes alheias e o mundo do jogo.</li>
            </ul>
        </section>

        <!-- Hall da Fama do CTF -->
        <section class="grid md:grid-cols-3 gap-6">
            <!-- Ranking de Vit√≥rias -->
            <div class="card">
                <h3 class="section-title text-2xl">üèÜ Maiores Campe√µes</h3>
                <p class="mb-4">Jogadores com mais vit√≥rias no CTF.</p>
                <div id="ctf-wins-loading" class="text-center text-gray-500"><i class="fas fa-spinner fa-spin mr-2"></i>
                    Carregando...</div>
                <ol id="ctf-wins-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="ctf-wins-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>

            <!-- Ranking de Abates -->
            <div class="card">
                <h3 class="section-title text-2xl">‚öîÔ∏è Maiores Artilheiros</h3>
                <p class="mb-4">Jogadores com mais abates no CTF.</p>
                <div id="ctf-kills-loading" class="text-center text-gray-500"><i
                        class="fas fa-spinner fa-spin mr-2"></i> Carregando...</div>
                <ol id="ctf-kills-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="ctf-kills-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>

            <!-- Ranking de Capturas -->
            <div class="card">
                <h3 class="section-title text-2xl">üè¥ Maiores Ladr√µes</h3>
                <p class="mb-4">Jogadores com mais capturas de bandeira.</p>
                <div id="ctf-captures-loading" class="text-center text-gray-500"><i
                        class="fas fa-spinner fa-spin mr-2"></i> Carregando...</div>
                <ol id="ctf-captures-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="ctf-captures-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>
        </section>

        <!-- Ranking de Habilidade (ELO) -->
        <section class="card col-span-1 md:col-span-3">
            <h2 class="section-title">‚öîÔ∏è Ranking de Habilidade (ELO)</h2>
            <p class="mb-4">Os duelistas mais habilidosos do servidor, medidos pelo sistema ELO.</p>
            <div id="leaderboard-elo-loading" class="text-center text-gray-500">
                <i class="fas fa-spinner fa-spin mr-2"></i> Carregando...
            </div>
            <ol id="leaderboard-elo-list" class="list-decimal list-inside space-y-2 hidden"></ol>
            <div id="leaderboard-elo-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
        </section>


        <!-- Rankings -->
        <section class="grid md:grid-cols-3 gap-6">
            <!-- Ranking Di√°rio -->
            <div class="card">
                <h3 class="section-title text-2xl">Ranking do Dia</h3>
                <p class="mb-4">Mais ins√≠gnias hoje!</p>
                <div id="leaderboard-daily-loading" class="text-center text-gray-500"><i
                        class="fas fa-spinner fa-spin mr-2"></i> Carregando...</div>
                <ol id="leaderboard-daily-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="leaderboard-daily-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>

            <!-- Ranking Mensal -->
            <div class="card">
                <h3 class="section-title text-2xl">Ranking do M√™s</h3>
                <p class="mb-4">Mais ins√≠gnias este m√™s!</p>
                <div id="leaderboard-monthly-loading" class="text-center text-gray-500"><i
                        class="fas fa-spinner fa-spin mr-2"></i> Carregando...</div>
                <ol id="leaderboard-monthly-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="leaderboard-monthly-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>

            <!-- Ranking Geral -->
            <div class="card">
                <h3 class="section-title text-2xl">Ranking Geral</h3>
                <p class="mb-4">Os maiores escoteiros!</p>
                <div id="leaderboard-all-time-loading" class="text-center text-gray-500"><i
                        class="fas fa-spinner fa-spin mr-2"></i> Carregando...</div>
                <ol id="leaderboard-all-time-list" class="list-decimal list-inside space-y-2 hidden"></ol>
                <div id="leaderboard-all-time-error" class="text-center text-red-500 hidden">Falha ao carregar.</div>
            </div>
        </section>
        <!-- Atividade do Servidor -->
        <section class="card">
            <h2 class="section-title">Atividade do Servidor (√öltimas 24h)</h2>
            <div class="relative h-64 md:h-80">
                <canvas id="player-activity-chart"></canvas>
            </div>
            <div id="chart-loading" class="text-center text-gray-500 mt-4">
                <i class="fas fa-spinner fa-spin mr-2"></i> Carregando gr√°fico de atividade...
            </div>
        </section>

        <!-- Como Jogar -->
        <section class="card">
            <h2 class="section-title">Como Jogar</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Instru√ß√µes Java -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">‚òï Java Edition</h3>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>No menu principal, clique em <strong>Multijogador</strong>.</li>
                        <li>Clique em <strong>Adicionar Servidor</strong>.</li>
                        <li>Em "Nome do Servidor", digite <strong>MC Trilhas</strong>.</li>
                        <li>Em "Endere√ßo do Servidor", cole: <strong>mcj.magnocat.net</strong></li>
                        <li>Clique em <strong>Conclu√≠do</strong> e entre na aventura!</li>
                    </ol>
                </div>
                <!-- Instru√ß√µes Bedrock -->
                <div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">üì± Bedrock Edition</h3>
                    <p class="text-sm mb-2">(Celular, Videogame, Windows 10/11)</p>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>No menu principal, v√° para a aba <strong>Servidores</strong>.</li>
                        <li>Role at√© o final e clique em <strong>Adicionar Servidor</strong>.</li>
                        <li>Em "Nome do Servidor", digite <strong>MC Trilhas</strong>.</li>
                        <li>Em "Endere√ßo do Servidor", cole: <strong>mcb.magnocat.net</strong></li>
                        <li>A porta √© <strong>19132</strong> (geralmente j√° vem preenchida).</li>
                        <li>Clique em <strong>Salvar</strong> e entre na aventura!</li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- Capture a Bandeira (CTF) -->
        <section class="card">
            <h2 class="section-title">Capture a Bandeira (CTF)</h2>
            <p class="mb-4 text-lg">
                Prepare-se para a batalha em nosso modo de jogo competitivo Capture a Bandeira! Duas equipes se
                enfrentam em uma arena com um √∫nico objetivo: invadir a base inimiga, roubar sua bandeira e traz√™-la de
                volta para sua pr√≥pria base para marcar um ponto.
            </p>

            <h3 class="text-xl font-bold text-gray-800 mb-2">Como Funciona:</h3>
            <ul class="list-disc list-inside space-y-3">
                <li>
                    <strong>Objetivo:</strong> O primeiro time a marcar <strong>3 pontos</strong> vence a partida. Se o
                    tempo acabar, o time com a maior pontua√ß√£o ganha.
                </li>
                <li>
                    <strong>Tempo de Partida:</strong> Cada partida dura <strong>10 minutos</strong>. Fique de olho no
                    cron√¥metro!
                </li>
                <li>
                    <strong>Equipes Aleat√≥rias:</strong> No in√≠cio de cada partida, os jogadores s√£o divididos em duas
                    equipes com cores aleat√≥rias (Vermelho, Azul, Verde, etc.).
                </li>
                <li>
                    <strong>Kit Padr√£o:</strong> Todos os jogadores recebem o mesmo conjunto de equipamentos, garantindo
                    uma luta justa onde a estrat√©gia de equipe √© o que mais importa.
                </li>
                <li>
                    <strong>Carregando a Bandeira:</strong> Ao pegar a bandeira inimiga, voc√™ se torna o alvo!
                    <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                        <li><i class="fas fa-eye text-yellow-500 mr-1"></i> Voc√™ ficar√° com um <strong>efeito de
                                brilho</strong>, tornando-se vis√≠vel para todos, at√© mesmo atrav√©s das paredes.</li>
                        <li><i class="fas fa-flag text-blue-500 mr-1"></i> A bandeira inimiga aparecer√° na sua cabe√ßa no
                            lugar do capacete.</li>
                    </ul>
                </li>
                <li>
                    <strong>Bandeira Ca√≠da:</strong> Se voc√™ morrer enquanto carrega a bandeira, ela cair√° no ch√£o. Sua
                    equipe tem <strong>30 segundos</strong> para recuper√°-la. Se ningu√©m a pegar, ela retornar√°
                    automaticamente para a base inimiga.
                </li>
                <li>
                    <strong>Como Pontuar:</strong> Para marcar um ponto, voc√™ deve levar a bandeira inimiga at√© a sua
                    base. Mas aten√ß√£o: voc√™ s√≥ pode pontuar se a <strong>sua pr√≥pria bandeira</strong> tamb√©m estiver na
                    sua base!
                </li>
                <li>
                    <strong>Chat de Equipe:</strong> Para conversar apenas com seus colegas de time, comece sua mensagem
                    no chat com um ponto de exclama√ß√£o (<code>!sua mensagem</code>).
                </li>
            </ul>
            <p class="mt-4">
                Use o comando <code>/ctf join</code> para entrar na fila e boa sorte!
            </p>
        </section>

        <!-- Guia de Cria√ß√£o de Arena CTF -->
        <section class="card">
            <h2 class="section-title">Como Criar sua Pr√≥pria Arena de CTF (Guia para Admins)</h2>
            <p class="mb-4 text-lg">
                Administradores podem expandir a divers√£o adicionando novas arenas ao servidor! O processo √© simples e
                usa plugins comuns como <a href="https://dev.bukkit.org/projects/multiverse-core" target="_blank"
                    class="text-blue-600 hover:underline">Multiverse-Core</a> e <a
                    href="https://dev.bukkit.org/projects/worldedit" target="_blank"
                    class="text-blue-600 hover:underline">WorldEdit</a>. Recomendamos criar as arenas em um mundo
                separado e vazio para melhor organiza√ß√£o e performance.
            </p>

            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Passo 1: Criar um Mundo Vazio (Void)</h3>
                    <p class="mb-2">Primeiro, crie um mundo limpo que servir√° como cont√™iner para suas arenas. Use o
                        seguinte comando do Multiverse:</p>
                    <code class="block bg-gray-100 p-2 rounded">/mv create arenas_ctf normal -g VoidGenerator</code>
                    <p class="mt-2 text-sm text-gray-600">Este comando cria um mundo chamado <strong>arenas_ctf</strong>
                        que √© completamente vazio. Depois, teleporte-se para ele com <code>/mv tp arenas_ctf</code>.</p>
                </div>

                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Passo 2: Importar sua Arena (Schematic)</h3>
                    <p class="mb-2">Com sua arena j√° salva como um arquivo <code>.schematic</code> ou
                        <code>.schem</code>, siga estes passos:
                    </p>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>Coloque o arquivo da sua arena na pasta <code>plugins/WorldEdit/schematics/</code>.</li>
                        <li>No jogo, dentro do mundo vazio, carregue o arquivo com: <code
                                class="bg-gray-100 p-1 rounded">//schem load nome_do_seu_arquivo</code></li>
                        <li>Posicione-se onde deseja que a arena apare√ßa e cole-a com: <code
                                class="bg-gray-100 p-1 rounded">//paste</code></li>
                        <li class="text-sm text-gray-600">Dica: Se a posi√ß√£o n√£o ficou boa, use <code>//undo</code> para
                            desfazer e tente novamente.</li>
                    </ol>
                </div>

                <div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Passo 3: Registrar a Arena no MCTrilhas</h3>
                    <p class="mb-2">Agora que a constru√ß√£o est√° no mundo, voc√™ precisa dizer ao plugin onde ficam os
                        pontos importantes. Use os comandos de administrador do CTF:</p>
                    <ol class="list-decimal list-inside space-y-2">
                        <li>Inicie o processo: <code>/ctf admin create id_da_sua_arena</code> (ex: <code>castelo</code>,
                            <code>floresta</code>).
                        </li>
                        <li>Voe at√© cada local importante e defina os pontos (lobby, redspawn, bluespawn, redflag,
                            blueflag) usando <code>/ctf admin set &lt;tipo&gt;</code>.</li>
                        <li>Verifique se todos os pontos foram definidos com <code>/ctf admin status</code>.</li>
                        <li>Finalize e salve a arena com: <code>/ctf admin save</code></li>
                    </ol>
                    <p class="mt-2">Pronto! Sua arena ser√° carregada e estar√° dispon√≠vel para as pr√≥ximas partidas.</p>
                </div>
            </div>
        </section>

        <!-- Comandos do Servidor -->
        <section class="card">
            <h2 class="section-title">Comandos do Servidor</h2>
            <p class="mb-6">Aqui est√£o os principais comandos que voc√™ pode usar no servidor para interagir com nossos
                sistemas.</p>

            <!-- Comandos para Jogadores -->
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Comandos para Jogadores</h3>
            <div class="overflow-x-auto rounded-lg border border-gray-200">
                <table class="min-w-full bg-white">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Comando</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="py-3 px-4"><code>/scout badges [jogador]</code></td>
                            <td class="py-3 px-4">Exibe as ins√≠gnias que voc√™ (ou outro jogador) conquistou.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/scout progress</code></td>
                            <td class="py-3 px-4">Mostra seu progresso para as pr√≥ximas ins√≠gnias.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/scout getmap &lt;insignia&gt;</code></td>
                            <td class="py-3 px-4">Recupera o mapa-trof√©u de uma ins√≠gnia j√° conquistada.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/daily</code></td>
                            <td class="py-3 px-4">Coleta sua recompensa di√°ria.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/ranque</code></td>
                            <td class="py-3 px-4">Mostra seu progresso para o pr√≥ximo ranque escoteiro.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/tesouro</code></td>
                            <td class="py-3 px-4">Inicia ou verifica o status da sua ca√ßa ao tesouro.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf join</code></td>
                            <td class="py-3 px-4">Entra na fila para uma partida de Capture a Bandeira.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf leave</code></td>
                            <td class="py-3 px-4">Sai da fila ou da partida atual de CTF.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf list</code></td>
                            <td class="py-3 px-4">Lista as arenas de CTF dispon√≠veis.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Comandos de Administra√ß√£o -->
            <h3 class="text-2xl font-bold text-gray-800 mb-2 mt-8">Comandos de Administra√ß√£o</h3>
            <p class="text-sm text-gray-600 mb-2">Requerem permiss√£o de administrador (OP).</p>
            <div class="overflow-x-auto rounded-lg border border-gray-200">
                <table class="min-w-full bg-white">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Comando</th>
                            <th class="py-3 px-4 text-left text-sm font-semibold text-gray-600">Descri√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="py-3 px-4"><code>/scout reload</code></td>
                            <td class="py-3 px-4">Recarrega as configura√ß√µes do plugin.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/scout admin addbadge &lt;jogador&gt; &lt;insignia&gt;</code>
                            </td>
                            <td class="py-3 px-4">Concede uma ins√≠gnia a um jogador.</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4"><code>/scout admin removebadge &lt;jogador&gt; &lt;insignia&gt;</code>
                            </td>
                            <td class="py-3 px-4">Remove uma ins√≠gnia de um jogador.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf admin create &lt;id&gt;</code></td>
                            <td class="py-3 px-4">Inicia a cria√ß√£o de uma nova arena.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf admin set &lt;tipo&gt;</code></td>
                            <td class="py-3 px-4">Define um local (lobby, redspawn, etc.) na sua posi√ß√£o atual.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf admin status</code></td>
                            <td class="py-3 px-4">Mostra o progresso da cria√ß√£o da arena atual.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf admin save</code></td>
                            <td class="py-3 px-4">Salva a arena que est√° sendo criada.</td>
                        </tr>
                        <tr class="bg-green-50">
                            <td class="py-3 px-4"><code>/ctf admin cancel</code></td>
                            <td class="py-3 px-4">Cancela a cria√ß√£o da arena atual.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Links √öteis -->
        <section class="card">
            <h2 class="section-title">Links √öteis</h2>
            <div class="space-y-4">
                <div class="link-item">
                    <i class="fas fa-map text-2xl text-green-600" aria-label="√çcone de mapa"></i>
                    <div>
                        <a href="http://mapa.magnocat.net:8100" target="_blank"
                            class="text-blue-600 hover:underline font-semibold">mapa.magnocat.net</a>
                        <p>Mapa interativo do servidor para explorar o mundo do jogo.</p>
                    </div>
                </div>
                <div class="link-item">
                    <i class="fab fa-discord text-2xl text-green-600" aria-label="√çcone do Discord"></i>
                    <div>
                        <a href="http://discord.magnocat.net" target="_blank"
                            class="text-blue-600 hover:underline font-semibold">discord.magnocat.net</a>
                        <p>Precisa de ajuda, quer sugerir algo ou apenas conversar? Junte-se √† nossa comunidade no
                            Discord! √â o nosso principal canal para suporte, novidades e intera√ß√£o.</p>
                    </div>
                </div>
                <div class="link-item">
                    <i class="fas fa-tachometer-alt text-2xl text-green-600" aria-label="√çcone de painel"></i>
                    <div>
                        <a href="http://amp.magnocat.net:8080" target="_blank"
                            class="text-blue-600 hover:underline font-semibold">amp.magnocat.net</a>
                        <p>Painel de administra√ß√£o para gerenciar o servidor.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sobre o Grupo Escoteiro -->
        <section class="card">
            <h2 class="section-title">Grupo Escoteiro do Ar Cidade das Flores</h2>
            <p class="text-lg">
                O MC Trilhas foi inspirado pelos valores do <a href="https://g.co/kgs/idwXxCh" target="_blank"
                    class="text-blue-600 hover:underline">Grupo Escoteiro do Ar Cidade das Flores</a>, fundado em
                Joinville, SC. Este grupo escoteiro promove o desenvolvimento de jovens atrav√©s de atividades ao ar
                livre, trabalho em equipe e valores √©ticos, que refletimos em nossa comunidade virtual.
            </p>
        </section>
    </main>

    <!-- Rodap√© -->
    <footer class="footer">
        <p>
            <a href="/admin/login.html" title="Painel de Administra√ß√£o" style="text-decoration: none; color: inherit;">¬©
                <span id="copyright-year">2024</span></a> MagnoCat Tecnologia. Todos os direitos reservados.
        </p>
        <p>Inspirado pelo <a href="https://g.co/kgs/idwXxCh" target="_blank"
                class="text-green-400 hover:underline">Grupo Escoteiro do Ar Cidade das Flores</a>.</p>
    </footer>

    <!-- Banner de Consentimento de Cookies -->
    <div id="cookie-consent-banner"
        class="hidden fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 shadow-lg z-50 flex items-center justify-between flex-wrap">
        <p class="flex-grow mb-2 md:mb-0 mr-4">
            Este site usa um cookie essencial para salvar suas prefer√™ncias. Ao continuar, voc√™ concorda com nossa
            <a href="/privacy.html" class="text-green-400 underline hover:text-green-300">Pol√≠tica de Privacidade</a>.
        </p>
        <button id="accept-cookies" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">
            Entendi
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- L√≥gica do PWA: Bot√£o de Instala√ß√£o ---
            const installButton = document.getElementById('install-pwa-btn');
            let deferredPrompt;

            // --- L√≥gica do PWA: Registra o Service Worker ---
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js').then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    }, err => {
                        console.error('Falha ao registrar o ServiceWorker:', err);
                    });
                });
            }

            window.addEventListener('beforeinstallprompt', (e) => {
                // Previne que o mini-infobar apare√ßa no Chrome mobile
                e.preventDefault();
                // Guarda o evento para que possa ser disparado depois
                deferredPrompt = e;
                // Mostra nosso bot√£o customizado de instala√ß√£o
                if (installButton) installButton.classList.remove('hidden');
            });

            if (installButton) {
                installButton.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        // Mostra o prompt de instala√ß√£o
                        deferredPrompt.prompt();
                        // Espera o usu√°rio responder ao prompt
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log(`Resposta do usu√°rio ao prompt de instala√ß√£o: ${outcome}`);
                        // S√≥ podemos usar o prompt uma vez.
                        deferredPrompt = null;
                        // Esconde o bot√£o ap√≥s o uso
                        installButton.classList.add('hidden');
                    }
                });
            }

            // --- L√≥gica de Consentimento de Cookies (LGPD) ---
            const cookieBanner = document.getElementById('cookie-consent-banner');
            const acceptCookiesBtn = document.getElementById('accept-cookies');

            function hasCookieConsent() {
                return document.cookie.split(';').some((item) => item.trim().startsWith('mctrilhas_cookie_consent='));
            }

            function giveCookieConsent() {
                if (cookieBanner) cookieBanner.classList.add('hidden');
                const expiryDate = new Date();
                expiryDate.setFullYear(expiryDate.getFullYear() + 1); // Cookie v√°lido por 1 ano
                document.cookie = `mctrilhas_cookie_consent=true; expires=${expiryDate.toUTCString()}; path=/; SameSite=Lax`;
            }

            if (!hasCookieConsent()) {
                if (cookieBanner) cookieBanner.classList.remove('hidden');
                if (acceptCookiesBtn) acceptCookiesBtn.addEventListener('click', giveCookieConsent);

                // Auto-aceite ap√≥s 15 segundos, como solicitado
                setTimeout(() => {
                    if (!hasCookieConsent()) {
                        giveCookieConsent();
                    }
                }, 15000);
            }

            // --- L√≥gica do Rodap√©: Atualiza o ano do copyright ---
            const startYear = 2024;
            const currentYear = new Date().getFullYear();
            const yearEl = document.getElementById('copyright-year');
            yearEl.textContent = (currentYear > startYear) ? `${startYear} - ${currentYear}` : startYear;

            // --- L√≥gica da API: Busca e renderiza os dados do servidor ---
            const API_KEY = ''; // Ex: 'sua-chave-secreta-aqui'
            const API_ENDPOINT = '/api/v1/data';

            // Fun√ß√£o principal para buscar e renderizar todos os dados da API
            async function fetchAndRenderData() {
                const headers = {};
                if (API_KEY) {
                    headers['X-API-Key'] = API_KEY;
                }

                try {
                    const response = await fetch(`${API_ENDPOINT}?t=${new Date().getTime()}`, { headers });
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();

                    renderLeaderboards(data.leaderboards);
                    renderPlayerChart(data.activityHistory);
                    renderCtfLeaderboards(data.ctfLeaderboards);
                    renderEloLeaderboard(data.eloLeaderboard);

                } catch (error) {
                    console.error('Falha ao buscar dados da API:', error);
                    // Exibe erro em todos os componentes que dependem da API
                    ['daily', 'monthly', 'all-time', 'wins', 'kills', 'captures', 'elo'].forEach(showLeaderboardError);
                    const chartLoadingEl = document.getElementById('chart-loading');
                    if (chartLoadingEl) chartLoadingEl.innerText = 'N√£o foi poss√≠vel carregar os dados de atividade.';
                }
            }

            function showLeaderboardError(type) {
                document.getElementById(`leaderboard-${type}-loading`)?.classList.add('hidden');
                document.getElementById(`leaderboard-${type}-error`)?.classList.remove('hidden');
                document.getElementById(`ctf-${type}-error`)?.classList.remove('hidden'); // Para os rankings de CTF
            }

            // Renderiza os 3 rankings (di√°rio, mensal, geral)
            function renderLeaderboards(leaderboards) {
                if (!leaderboards) return;
                populateLeaderboard('daily', leaderboards.daily);
                populateLeaderboard('monthly', leaderboards.monthly);
                populateLeaderboard('all-time', leaderboards.allTime);
            }

            // Renderiza os 3 rankings do CTF
            function renderCtfLeaderboards(leaderboards) {
                if (!leaderboards) return;
                populateCtfLeaderboard('wins', leaderboards.wins, 'vit√≥rias');
                populateCtfLeaderboard('kills', leaderboards.kills, 'abates');
                populateCtfLeaderboard('captures', leaderboards.captures, 'capturas');
            }

            // Preenche uma lista de ranking espec√≠fica no HTML
            function populateLeaderboard(type, data) {
                const listEl = document.getElementById(`leaderboard-${type}-list`);
                if (!listEl || !data) return;

                // A API retorna um objeto {nome: pontua√ß√£o}. Transformamos em um array de objetos.
                const players = Object.entries(data).map(([name, badges]) => ({ name, badges }));

                listEl.innerHTML = ''; // Limpa a lista

                if (players.length === 0) {
                    listEl.innerHTML = '<li class="text-gray-500">Ningu√©m no ranking ainda.</li>';
                } else {
                    players.forEach(player => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `
                    <span class="font-semibold text-gray-800">${player.name}</span> - 
                    <span class="font-bold text-green-700">${player.badges}</span> ins√≠gnias
                `;
                        listEl.appendChild(listItem);
                    });
                }

                document.getElementById(`leaderboard-${type}-loading`)?.classList.add('hidden');
                listEl.classList.remove('hidden');
            }

            // Preenche uma lista de ranking do CTF
            function populateCtfLeaderboard(type, data, unit) {
                const listEl = document.getElementById(`ctf-${type}-list`);
                if (!listEl || !data) return;

                const players = Object.entries(data).map(([name, value]) => ({ name, value }));

                listEl.innerHTML = '';

                if (players.length === 0) {
                    listEl.innerHTML = '<li class="text-gray-500">Ningu√©m no ranking ainda.</li>';
                } else {
                    players.forEach(player => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `
                    <span class="font-semibold text-gray-800">${player.name}</span> - 
                    <span class="font-bold text-green-700">${player.value}</span> ${unit}
                `;
                        listEl.appendChild(listItem);
                    });
                }

                document.getElementById(`ctf-${type}-loading`)?.classList.add('hidden');
                listEl.classList.remove('hidden');
            }

            // Preenche a lista de ranking de ELO
            function renderEloLeaderboard(data) {
                const listEl = document.getElementById('leaderboard-elo-list');
                const loadingEl = document.getElementById('leaderboard-elo-loading');
                const errorEl = document.getElementById('leaderboard-elo-error');
                if (!listEl || !loadingEl || !errorEl) return;

                if (!data) {
                    loadingEl.classList.add('hidden');
                    errorEl.classList.remove('hidden');
                    return;
                }

                const players = Object.entries(data).map(([name, elo]) => ({ name, elo }));
                listEl.innerHTML = '';

                if (players.length === 0) {
                    listEl.innerHTML = '<li class="text-gray-500">Ningu√©m no ranking ainda.</li>';
                } else {
                    players.forEach(player => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<span class="font-semibold text-gray-800">${player.name}</span> - <span class="font-bold text-yellow-600">${player.elo}</span> ELO`;
                        listEl.appendChild(listItem);
                    });
                }
                loadingEl.classList.add('hidden');
                listEl.classList.remove('hidden');
            }

            // Renderiza o gr√°fico de atividade dos jogadores
            function renderPlayerChart(activityHistory) {
                const loadingEl = document.getElementById('chart-loading');
                const canvasEl = document.getElementById('player-activity-chart');
                if (!canvasEl || !loadingEl || !activityHistory) return;

                const ctx = canvasEl.getContext('2d');

                try {
                    if (activityHistory.length === 0) {
                        throw new Error('Nenhum dado de atividade dispon√≠vel.');
                    }

                    // A API j√° fornece os dados no formato correto (timestamp e contagem de players)
                    const labels = activityHistory.map(entry => new Date(entry.timestamp));
                    const dataPoints = activityHistory.map(entry => entry.players);

                    loadingEl.classList.add('hidden');

                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Jogadores Online',
                                data: dataPoints,
                                borderColor: 'rgba(47, 133, 90, 1)',
                                backgroundColor: 'rgba(47, 133, 90, 0.2)',
                                fill: true,
                                tension: 0.3,
                                pointRadius: 0,
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                x: {
                                    type: 'time',
                                    time: { unit: 'hour', tooltipFormat: 'dd/MM HH:mm', displayFormats: { hour: 'HH:mm' } },
                                    grid: { display: false }
                                },
                                y: {
                                    beginAtZero: true,
                                    ticks: { stepSize: 1, callback: (value) => Number.isInteger(value) ? value : null }
                                }
                            },
                            plugins: { legend: { display: false } },
                            interaction: { mode: 'index', intersect: false },
                        }
                    });

                } catch (error) {
                    console.error('Erro ao renderizar o gr√°fico de atividade:', error);
                    loadingEl.innerText = 'N√£o foi poss√≠vel carregar o gr√°fico de atividade.';
                }
            }

            // Inicia o processo de busca e renderiza√ß√£o dos dados
            fetchAndRenderData();
        });
    </script>


</body>

</html>